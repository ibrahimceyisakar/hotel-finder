# Visualization Dashboard

This document provides detailed information about the visualization dashboard component of the project, which is implemented in `hotel_dashboard.py`.

## Overview

The visualization dashboard is built using Streamlit, a Python library for creating interactive web applications. It provides a user-friendly interface for exploring and analyzing the hotel data processed by the [data analysis component](analysis.md).

## Dashboard Features

The dashboard includes the following features:

1. **Interactive Controls**: Adjust the number of top hotels to display
2. **Summary Statistics**: View average price, review score, and value ratio
3. **Multiple Analysis Tabs**: Explore different aspects of the hotel data
4. **Interactive Visualizations**: Hover over data points for more information
5. **Sortable Data Tables**: View and sort the raw data

## Dashboard Tabs

The dashboard is organized into five tabs, each focusing on a different aspect of the hotel data:

### 1. Value Overview

This tab provides an overview of the hotels ranked by value ratio:

- Bar chart of hotels by value ratio
- Scatter plot of price vs. review score
- Table of top hotels with key metrics

### 2. Price Analysis

This tab focuses on the price distribution of the hotels:

- Histogram of hotel prices
- Box plot of prices by star rating

### 3. Review Analysis

This tab analyzes the review scores of the hotels:

- Histogram of review scores
- Box plot of review scores by star rating

### 4. Feature Analysis

This tab examines the features/amenities offered by the hotels:

- Bar chart of most common features
- Bar chart showing the impact of features on review scores

### 5. Location Analysis

This tab explores the geographical distribution of the hotels:

- Bar chart of hotels by location
- Scatter plot of distance to center vs. price

## Data Processing

The dashboard performs several data processing steps:

1. **Loading Data**: Reads the JSON file generated by the data analysis component
2. **Numeric Conversion**: Converts string values to numeric types for analysis
3. **Feature Extraction**: Processes the features list for analysis
4. **Location Processing**: Extracts numeric distance values from text

## Visualizations

The dashboard uses Plotly for creating interactive visualizations:

- **Bar Charts**: For comparing categorical data
- **Scatter Plots**: For examining relationships between variables
- **Histograms**: For showing distributions
- **Box Plots**: For comparing distributions across categories

## Running the Dashboard

To run the dashboard:

1. Ensure you have completed the [installation and setup](installation.md).
2. Make sure you have run the [web scraping component](scraping.md) and [data analysis component](analysis.md) to generate the input data.
3. Activate your virtual environment if you're using one.
4. Run the Streamlit application:
   ```bash
   streamlit run hotel_dashboard.py
   ```

This will start the Streamlit server and open the dashboard in your default web browser. If it doesn't open automatically, you can access it at `http://localhost:8501`.

## Dashboard Controls

### Sidebar Controls

The sidebar contains the following controls:

- **Number of Top Hotels**: Slider to adjust how many hotels to display (5-100)
- **Summary Statistics**: Display of average price, review score, and value ratio

### Tab Navigation

You can navigate between the different analysis tabs by clicking on the tab names at the top of the dashboard:

- Value Overview
- Price Analysis
- Review Analysis
- Feature Analysis
- Location Analysis

## Customization

### Adding New Visualizations

You can add new visualizations by creating new functions in the `hotel_dashboard.py` file. For example, to add a new visualization to the Price Analysis tab:

1. Create a new function to generate the visualization:
   ```python
   def create_new_price_viz(df):
       fig = px.line(df, x='star_rating', y='numeric_price', title="New Price Visualization")
       return fig
   ```

2. Update the tab content to include the new visualization:
   ```python
   with tab2:
       st.header("Price Analysis")
       
       # Create price analysis visualizations
       fig_price_dist, fig_price_star = create_price_analysis(df)
       fig_new_price = create_new_price_viz(df)
       
       # Display visualizations
       col1, col2 = st.columns(2)
       with col1:
           st.plotly_chart(fig_price_dist, use_container_width=True)
       with col2:
           st.plotly_chart(fig_price_star, use_container_width=True)
       
       st.plotly_chart(fig_new_price, use_container_width=True)
   ```

### Adding New Tabs

You can add new tabs to the dashboard by updating the tab creation and content:

1. Add a new tab to the tab list:
   ```python
   tab1, tab2, tab3, tab4, tab5, tab6 = st.tabs([
       "Value Overview", 
       "Price Analysis", 
       "Review Analysis", 
       "Feature Analysis", 
       "Location Analysis",
       "New Tab"
   ])
   ```

2. Add content to the new tab:
   ```python
   with tab6:
       st.header("New Analysis")
       # Add your new content here
   ```

## Troubleshooting

### Common Issues

1. **Input file not found**: Ensure that you have run the data analysis component and that the `top_value_hotels.json` file exists.

2. **Streamlit server issues**: If the Streamlit server fails to start, try:
   - Checking that port 8501 is not in use
   - Restarting your virtual environment
   - Updating Streamlit: `pip install --upgrade streamlit`

3. **Visualization errors**: If visualizations fail to render, check:
   - That the data contains the expected columns
   - That numeric values have been properly converted
   - That there are no missing values causing errors

4. **Performance issues**: If the dashboard is slow:
   - Reduce the number of hotels being processed
   - Simplify complex visualizations
   - Consider using caching for expensive computations:
     ```python
     @st.cache_data
     def load_and_process_data(json_file, top_n=10):
         # Function code here
     ```
